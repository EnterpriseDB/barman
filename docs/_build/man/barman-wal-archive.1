.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "BARMAN-WAL-ARCHIVE" "1" "Oct 02, 2025" "3.16" "Barman"
.SH NAME
barman-wal-archive \- Barman-cli Commands
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
.EX
barman\-wal\-archive
    [ { \-h | \-\-help } ]
    [ { \-V | \-\-version } ]
    [ { \-U | \-\-user } USER ]
    [ \-\-port PORT ]
    [ { { \-z | \-\-gzip } | { \-j | \-\-bzip2 } | \-\-xz | \-\-snappy | \-\-zstd | \-\-lz4 } ]
    [ \-\-compression\-level COMPRESSION_LEVEL ]
    [ { \-c | \-\-config } CONFIG ]
    [ { \-t | \-\-test } ]
    [ \-\-md5 ]
    BARMAN_HOST SERVER_NAME WAL_PATH
.EE
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
This script can be utilized in the \fBarchive_command\fP of a Postgres server to
transfer WAL files to a Barman host using the \fBput\-wal\fP command (introduced in Barman
2.6). It establishes an SSH connection to the Barman host, enabling seamless integration
of Barman within Postgres clusters for improved business continuity.
.sp
\fBExit Statuses\fP are:
.INDENT 0.0
.IP \(bu 2
\fB0\fP for \fBSUCCESS\fP\&.
.IP \(bu 2
\fBnon\-zero\fP for \fBFAILURE\fP\&.
.UNINDENT
.SH PARAMETERS
.INDENT 0.0
.TP
.B \fBSERVER_NAME\fP
The server name configured in Barman for the Postgres server from which
the WAL file is retrieved.
.TP
.B \fBBARMAN_HOST\fP
The host of the Barman server.
.TP
.B \fBWAL_PATH\fP
The value of the \(aq%p\(aq keyword (according to \fBarchive_command\fP).
.TP
.B \fB\-h\fP / \fB\-\-help\fP
Display a help message and exit.
.TP
.B \fB\-V\fP / \fB\-\-version\fP
Display the program\(aqs version number and exit.
.TP
.B \fB\-U\fP / \fB\-\-user\fP
Specify the user for the SSH connection to the Barman server (defaults to
\fBbarman\fP).
.TP
.B \fB\-\-port\fP
Define the port used for the SSH connection to the Barman server.
.TP
.B \fB\-z\fP / \fB\-\-gzip\fP
gzip\-compress the WAL file before sending it to the Barman server.
.TP
.B \fB\-j\fP / \fB\-\-bzip2\fP
bzip2\-compress the WAL file before sending it to the Barman server.
.TP
.B \fB\-\-xz\fP
xz\-compress the WAL file before sending it to the Barman server.
.TP
.B \fB\-\-snappy\fP
snappy\-compress the WAL file before sending it to the Barman server (requires the
\fBpython\-snappy\fP Python library to be installed).
.TP
.B \fB\-\-zstd\fP
zstd\-compress the WAL file before sending it to the Barman server (requires the
\fBzstandard\fP Python library to be installed).
.TP
.B \fB\-\-lz4\fP
lz4\-compress the WAL file before sending it to the Barman server (requires the
\fBlz4\fP Python library to be installed).
.TP
.B \fB\-\-compression\-level\fP
A compression level to be used by the selected compression algorithm. Valid
values are integers within the supported range of the chosen algorithm or one
of the predefined labels: \fBlow\fP, \fBmedium\fP, and \fBhigh\fP\&. The range of each
algorithm as well as what level each predefined label maps to can be found in
\fI\%compression_level\fP\&.
.TP
.B \fB\-c\fP /  \fB\-\-config\fP
Specify the configuration file on the Barman server.
.TP
.B \fB\-t\fP / \fB\-\-test\fP
Test the connection and configuration of the specified Postgres server in Barman to
ensure it is ready to receive WAL files. This option ignores the mandatory argument
\fBWAL_PATH\fP\&.
.TP
.B \fB\-\-md5\fP
Use MD5 instead of SHA256 as the hash algorithm to calculate the checksum of the WAL
file when transmitting it to the Barman server. This is used to maintain
compatibility with older server versions, as older versions of Barman server used to
support only MD5.
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
When compression is enabled in \fBbarman\-wal\-archive\fP, it takes precedence over the
compression settings configured on the Barman server, if they differ.
.UNINDENT
.UNINDENT
.sp
\fBIMPORTANT:\fP
.INDENT 0.0
.INDENT 3.5
When compression is enabled in \fBbarman\-wal\-archive\fP, it is performed on the client
side, before the file is sent to Barman. Be mindful of the database server\(aqs load and
the chosen compression algorithm and level, as higher compression can delay WAL
shipping, causing WAL files to accumulate.
.UNINDENT
.UNINDENT
.SH AUTHOR
EnterpriseDB
.SH COPYRIGHT
Â© Copyright EnterpriseDB UK Limited 2011-2025
.\" Generated by docutils manpage writer.
.
