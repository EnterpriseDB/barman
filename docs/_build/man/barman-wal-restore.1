.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "BARMAN-WAL-RESTORE" "1" "May 15, 2024" "3.14" "Barman"
.SH NAME
barman-wal-restore \- Barman-cli Commands
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
.EX
barman\-wal\-restore
    [ { \-h | \-\-help } ]
    [ { \-V | \-\-version } ]
    [ { \-U | \-\-user } USER ]
    [ \-\-port PORT ]
    [ { \-s | \-\-sleep } SECONDS ]
    [ { \-p | \-\-parallel } JOBS ]
    [ \-\-spool\-dir SPOOL_DIR ]
    [ { \-P | \-\-partial } ]
    [ { { \-z | \-\-gzip } | { \-j | \-\-bzip2 } | \-\-keep\-compression } ]
    [ { \-c | \-\-config } CONFIG ]
    [ { \-t | \-\-test } ]
    BARMAN_HOST SERVER_NAME WAL_NAME WAL_DEST
.EE
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
This script serves as a \fBrestore_command\fP for Postgres servers, enabling the
retrieval of WAL files through Barman\(aqs \fBget\-wal\fP feature. It establishes an SSH
connection to the Barman host and facilitates the integration of Barman within
Postgres clusters, enhancing business continuity.
.sp
\fBExit Statuses\fP are:
.INDENT 0.0
.IP \(bu 2
\fB0\fP for \fBSUCCESS\fP\&.
.IP \(bu 2
\fB1\fP for remote get\-wal command \fBFAILURE\fP, likely because the requested WAL could
not be found.
.IP \(bu 2
\fB2\fP for ssh connection \fBFAILURE\fP\&.
.IP \(bu 2
Any other \fBnon\-zero\fP for \fBFAILURE\fP\&.
.UNINDENT
.SH PARAMETERS
.INDENT 0.0
.TP
.B \fBSERVER_NAME\fP
The server name configured in Barman for the Postgres server from which the
WAL file is retrieved.
.TP
.B \fBBARMAN_HOST\fP
The host of the Barman server.
.TP
.B \fBWAL_NAME\fP
The value of the \(aq%f\(aq keyword (according to \fBrestore_command\fP).
.TP
.B \fBWAL_DEST\fP
The value of the \(aq%p\(aq keyword (according to \fBrestore_command\fP).
.TP
.B \fB\-h\fP / \fB\-\-help\fP
Display a help message and exit.
.TP
.B \fB\-V\fP / \fB\-\-version\fP
Display the program\(aqs version number and exit.
.TP
.B \fB\-U\fP / \fB\-\-user\fP
Specify the user for the SSH connection to the Barman server (defaults to
\fBbarman\fP).
.TP
.B \fB\-\-port\fP
Define the port used for the SSH connection to the Barman server.
.TP
.B \fB\-s\fP / \fB\-\-sleep\fP
Pause for \fBSECONDS\fP after a failed \fBget\-wal\fP request (defaults to \fB0\fP \- no
wait).
.TP
.B \fB\-p\fP / \fB\-\-parallel\fP
Indicate the number of files to \fBpeek\fP and transfer simultaneously (defaults to
\fB0\fP \- disabled).
.TP
.B \fB\-\-spool\-dir\fP
Specify the spool directory for WAL files (defaults to \fB/var/tmp/walrestore\fP).
.TP
.B \fB\-P\fP /  \fB\-\-partial\fP
Include partial WAL files (.partial) in the retrieval.
.TP
.B \fB\-z\fP /  \fB\-\-gzip\fP
Transfer WAL files compressed with \fBgzip\fP\&.
.TP
.B \fB\-j\fP /  \fB\-\-bzip2\fP
Transfer WAL files compressed with \fBbzip2\fP\&.
.TP
.B \fB\-\-keep\-compression\fP
If specified, compressed files will be trasnfered as\-is and decompressed on arrival
on the client\-side.
.TP
.B \fB\-c\fP /  \fB\-\-config\fP
Specify the configuration file on the Barman server.
.TP
.B \fB\-t\fP / \fB\-\-test\fP
Test the connection and configuration of the specified Postgres server in Barman to
ensure it is ready to receive WAL files. This option ignores the mandatory arguments
\fBWAL_NAME\fP and \fBWAL_DEST\fP\&.
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 0.0
.INDENT 3.5
\fB\-z\fP / \fB\-\-gzip\fP and \fB\-j\fP /  \fB\-\-bzip2\fP options are deprecated and will be
removed in the future. For WAL compression, please make sure to enable it directly
on the Barman server via the \fBcompression\fP configuration option.
.UNINDENT
.UNINDENT
.SH AUTHOR
EnterpriseDB
.SH COPYRIGHT
Â© Copyright EnterpriseDB UK Limited 2011-2025
.\" Generated by docutils manpage writer.
.
