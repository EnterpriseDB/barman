- summary: The `restore_command` for local restores no longer includes `sudo`
  description: |
    When using `barman restore --get-wal` for a local restore (i.e. without
    `--remote-ssh-command`), the generated `restore_command` no longer includes a
    `sudo -u $USER` prefix. This simplifies the process for the common case where the
    locally restored Postgres cluster is run by the `barman` user, whom already owns the
    files by the end of the `barman restore`` operation.

    **Action Required:** If you intend to run the restored cluster as a different
    user (e.g., `postgres`), you must now manually add the appropriate
    `sudo -u postgres` prefix to the `restore_command` in the recovery configuration and
    ensure file ownership is correct.
  type: notable_change
  jira_tickets:
    - BAR-675
