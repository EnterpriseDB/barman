\newpage

# Установка

> **ВНИМАНИЕ:**
> Рекомендуемый способ установки Barman - использовать
> доступные пакеты для вашего дистрибутива GNU / Linux.

## Установка на дистрибутивы семейства RedHat/CentOS используя RPM пакеты

Barman может быть установлен на системах RHEL7, RHEL6 и RHEL5 Linux
с использованием пакетов RPM. Предварительно необходимо добавить
репозиторий Extra Packages Enterprise Linux (EPEL).

Пакеты RPM для Barman доступны в RPM репозитории 
[PostgreSQL Global Development Group RPM] [yumpgdg].
Следуйте инструкциям для своего дистрибутива
(например, RedHat, CentOS или Fedora) и архитектуре,
как описано в [yum.postgresql.org] [yumpgdg].

Затем от имени пользователя `root` выполните:

``` bash
yum install barman
```

2ndQuadrant также собирает RPM пакеты Barman и распространяет их через [Sourceforge.net] [3].

## Установка на Debian/Ubuntu с помощью пакетов

Barman может быть установлен на системах Debian and Ubuntu Linux
с использованием DEB-пакетов 

Он напрямую доступен в официальном репозитории для
Debian и Ubuntu, однако эти репозитории могут
не содержать последней доступной версии.

Если вы хотите иметь последнюю версию Barman,
рекомендуемый метод - установить его через репозиторий [PostgreSQL Community APT] [aptpgdg]. Инструкции можно найти в разделе [PostgreSQL Community APT repository] [aptpgdg].

> **ПРИМЕЧАНИЕ:**
> Благодаря непосредственному участию разработчиков Barman
> в проекте репозитория APT PostgreSQL Community
> вы всегда будете иметь доступ к самым последним версиям Barman.

Установка Barman очень проста. От имени пользователя `root` выполните:

``` bash
apt-get install barman
```

## Установка из исходных кодов

> **ВНИМАНИЕ:**
> Ручная установка Barman из источников должна
> выполняться только экспертами GNU/Linux
> Для установки Barman этот способ требует
> действий по администрированию системы, таких как
> управление зависимостями, создание пользователя barman,
> настройка файла barman.conf, настройка cron для
> команды barman cron, управление журналами и т. д.

Создайте системного пользователя barman на резервном сервере.
Как пользователь barman, загрузите исходные коды  и распакуйте их.

Для установки на всю систему целиком введите:

``` bash
barman@backup$ ./setup.py build
# run this command with root privileges or through sudo
barman@backup# ./setup.py install
```

Для локальной установки только вашему пользователю:

``` bash
barman@backup$ ./setup.py install --user
```

Приложение barman будет установлено в вашем каталоге пользователя ([убедитесь, что ваша переменная среды PATH установлена правильно] [setup_user]). 

[Barman также доступен в индексе пакетов Python (PyPI)] [pypi] и может быть установлен с помощью `pip`.

## Обновление Barman с версий 1.X

Версия 2.0 требует, чтобы пользователи явно настраивали
свою стратегию архивации. Ранее файловый архиватор,
управляемый параметром `archiver`, был включен по умолчанию.

Когда вы обновляете установку Barman до версии 2.0,
убедитесь, что вы добавили следующую строку либо глобально,
либо для любого сервера, который этого требует:

``` ini
archiver = on
```

Кроме того, для нескольких выпусков Barman будет прозрачно
устанавливать значение параметра `archiver` в включено, 
на любой сервер, который явно не задал стратегию
архивирования и не выдавал предупреждение.
Кроме того, версия 2.0 полностью совместима со старыми.
