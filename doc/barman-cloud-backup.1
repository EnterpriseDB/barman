.\" Automatically generated by Pandoc 2.14.1
.\"
.TH "BARMAN-CLOUD-BACKUP" "1" "June 30, 2021" "Barman User manuals" "Version 2.12.1"
.hy
.SH NAME
.PP
barman-cloud-backup - Backup a PostgreSQL instance and stores it in the
Cloud
.SH SYNOPSIS
.PP
barman-cloud-backup [\f[I]OPTIONS\f[R]] \f[I]DESTINATION_URL\f[R]
\f[I]SERVER_NAME\f[R]
.SH DESCRIPTION
.PP
This script can be used to perform a backup of a local PostgreSQL
instance and ship the resulting tarball(s) to the Cloud.
It requires read access to PGDATA and tablespaces (normally run as
\f[C]postgres\f[R] user).
Currently only AWS S3 is supported.
.PP
This script and Barman are administration tools for disaster recovery of
PostgreSQL servers written in Python and maintained by 2ndQuadrant.
.PP
\f[B]IMPORTANT:\f[R] the Cloud upload process may fail if any file with
a size greater than the configured \f[C]--max-archive-size\f[R] is
present either in the data directory or in any tablespaces.
However, PostgreSQL creates files with a maximum size of 1GB, and that
size is always allowed, regardless of the \f[C]max-archive-size\f[R]
parameter.
.SH POSITIONAL ARGUMENTS
.TP
DESTINATION_URL
URL of the cloud destination, such as a bucket in AWS S3.
For example: \f[C]s3://BUCKET_NAME/path/to/folder\f[R] (where
\f[C]BUCKET_NAME\f[R] is the bucket you have created in AWS).
.TP
SERVER_NAME
the name of the server as configured in Barman.
.SH OPTIONS
.TP
-h, \[en]help
show a help message and exit
.TP
-V, \[en]version
show program\[cq]s version number and exit
.TP
-v, \[en]verbose
increase output verbosity (e.g., -vv is more than -v)
.TP
-q, \[en]quiet
decrease output verbosity (e.g., -qq is less than -q)
.TP
-t, \[en]test
test connectivity to the cloud destination and exit
.TP
-P, \[en]profile
profile name (e.g.\ INI section in AWS credentials file)
.TP
-z, \[en]gzip
gzip-compress the tar files when uploading to the cloud
.TP
-j, \[en]bzip2
bzip2-compress the tar files when uploading to the cloud
.TP
-e, \[en]encryption
The encryption algorithm used when storing the uploaded data in S3.
Allowed values: `AES256'|`aws:kms'.
.TP
-d, \[en]dbname
database name or conninfo string for Postgres connection (default:
postgres)
.TP
-h, \[en]host
host or Unix socket for PostgreSQL connection (default: libpq settings)
.TP
-p, \[en]port
port for PostgreSQL connection (default: libpq settings)
.TP
-U, \[en]user
user name for PostgreSQL connection (default: libpq settings)
.TP
\[en]immediate-checkpoint
forces the initial checkpoint to be done as quickly as possible
.TP
-J JOBS, \[en]jobs JOBS
number of subprocesses to upload data to S3 (default: 2)
.TP
-S MAX_ARCHIVE_SIZE, \[en]max-archive-size MAX_ARCHIVE_SIZE
maximum size of an archive when uploading to S3 (default: 100GB)
.TP
\[en]endpoint-url
override the default S3 URL construction mechanism by specifying an
endpoint.
.SH REFERENCES
.PP
For Boto:
.IP \[bu] 2
https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html
.PP
For AWS:
.IP \[bu] 2
http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-set-up.html
.IP \[bu] 2
http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html.
.PP
For libpq settings information:
.IP \[bu] 2
https://www.postgresql.org/docs/current/libpq-envars.html
.SH DEPENDENCIES
.IP \[bu] 2
boto3
.SH EXIT STATUS
.TP
0
Success
.TP
Not zero
Failure
.SH BUGS
.PP
Barman has been extensively tested, and is currently being used in
several production environments.
However, we cannot exclude the presence of bugs.
.PP
Any bug can be reported via the Github issue tracker.
.SH RESOURCES
.IP \[bu] 2
Homepage: <http://www.pgbarman.org/>
.IP \[bu] 2
Documentation: <http://docs.pgbarman.org/>
.IP \[bu] 2
Professional support: <http://www.2ndQuadrant.com/>
.SH COPYING
.PP
Barman is the property of 2ndQuadrant Limited and its code is
distributed under GNU General Public License v3.
.PP
\[co] Copyright EnterpriseDB UK Limited 2011-2021
.SH AUTHORS
2ndQuadrant <http://www.2ndQuadrant.com>.
