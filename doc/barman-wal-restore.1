.\" Automatically generated by Pandoc 2.2.1
.\"
.TH "BARMAN\-WAL\-RESTORE" "1" "September 14, 2022" "Barman User manuals" "Version 3.1.0"
.hy
.SH NAME
.PP
barman\-wal\-restore \- \[aq]restore_command\[aq] based on Barman\[aq]s
get\-wal
.SH SYNOPSIS
.PP
barman\-wal\-restore [\f[I]OPTIONS\f[]] \f[I]BARMAN_HOST\f[]
\f[I]SERVER_NAME\f[] \f[I]WAL_NAME\f[] \f[I]WAL_DEST\f[]
.SH DESCRIPTION
.PP
This script can be used as a \[aq]restore_command\[aq] for PostgreSQL
servers, retrieving WAL files using the \[aq]get\-wal\[aq] feature of
Barman.
An SSH connection will be opened to the Barman host.
\f[C]barman\-wal\-restore\f[] allows the integration of Barman in
PostgreSQL clusters for better business continuity results.
.PP
This script and Barman are administration tools for disaster recovery of
PostgreSQL servers written in Python and maintained by EnterpriseDB.
.SH POSITIONAL ARGUMENTS
.TP
.B BARMAN_HOST
the host of the Barman server.
.RS
.RE
.TP
.B SERVER_NAME
the server name configured in Barman from which WALs are taken.
.RS
.RE
.TP
.B WAL_NAME
the value of the \[aq]%f\[aq] keyword (according to
\[aq]restore_command\[aq]).
.RS
.RE
.TP
.B WAL_DEST
the value of the \[aq]%p\[aq] keyword (according to
\[aq]restore_command\[aq]).
.RS
.RE
.SH OPTIONS
.TP
.B \-h, \-\-help
show a help message and exit
.RS
.RE
.TP
.B \-V, \-\-version
show program\[aq]s version number and exit
.RS
.RE
.TP
.B \-U \f[I]USER\f[], \-\-user \f[I]USER\f[]
the user used for the ssh connection to the Barman server.
Defaults to \[aq]barman\[aq].
.RS
.RE
.TP
.B \-\-port \f[I]PORT\f[]
the port used for the ssh connection to the Barman server.
.RS
.RE
.TP
.B \-s \f[I]SECONDS\f[], \-\-sleep \f[I]SECONDS\f[]
sleep for SECONDS after a failure of get\-wal request.
Defaults to 0 (nowait).
.RS
.RE
.TP
.B \-p \f[I]JOBS\f[], \-\-parallel \f[I]JOBS\f[]
specifies the number of files to peek and transfer in parallel, defaults
to 0 (disabled).
.RS
.RE
.TP
.B \-\-spool\-dir \f[I]SPOOL_DIR\f[]
Specifies spool directory for WAL files.
Defaults to \[aq]/var/tmp/walrestore\[aq]
.RS
.RE
.TP
.B \-P, \-\-partial
retrieve also partial WAL files (.partial)
.RS
.RE
.TP
.B \-z, \-\-gzip
transfer the WAL files compressed with gzip
.RS
.RE
.TP
.B \-j, \-\-bzip2
transfer the WAL files compressed with bzip2
.RS
.RE
.TP
.B \-c \f[I]CONFIG\f[], \-\-config \f[I]CONFIG\f[]
configuration file on the Barman server
.RS
.RE
.TP
.B \-t, \-\-test
test both the connection and the configuration of the requested
PostgreSQL server in Barman to make sure it is ready to receive WAL
files.
With this option, the \[aq]WAL_NAME\[aq] and \[aq]WAL_DEST\[aq]
mandatory arguments are ignored.
.RS
.RE
.SH EXIT STATUS
.TP
.B 0
Success
.RS
.RE
.TP
.B 1
The remote \f[C]get\-wal\f[] command failed, most likely because the
requested WAL could not be found.
.RS
.RE
.TP
.B 2
The SSH connection to the Barman server failed.
.RS
.RE
.TP
.B Other non\-zero codes
Failure
.RS
.RE
.SH SEE ALSO
.PP
\f[C]barman\f[] (1), \f[C]barman\f[] (5).
.SH BUGS
.PP
Barman has been extensively tested, and is currently being used in
several production environments.
However, we cannot exclude the presence of bugs.
.PP
Any bug can be reported via the GitHub issue tracker.
.SH RESOURCES
.IP \[bu] 2
Homepage: <https://www.pgbarman.org/>
.IP \[bu] 2
Documentation: <https://docs.pgbarman.org/>
.IP \[bu] 2
Professional support: <https://www.enterprisedb.com/>
.SH COPYING
.PP
Barman is the property of EnterpriseDB UK Limited and its code is
distributed under GNU General Public License v3.
.PP
Â© Copyright EnterpriseDB UK Limited 2011\-2022
.SH AUTHORS
EnterpriseDB <https://www.enterprisedb.com>.
